# Narrative

## Background

During the Black Lives Matters protests in 2020, the New York City (NYC) budget came to the forefront of public conversation when citizens began to question why the New York Police Department (NYPD) receives so much funding, leading to a diversion of $1 billion from the NYPD to other agencies. Despite this renewed spotlight on the budget, the resources explaining what the budget is and what it does are scattered across the city’s various agency websites, leaving residents to jump from site to site, attempting to piece together the fundamentals of how the budget works.
In a general sense, budgets are plans covering future income and spending, but they are also a reflection of a society’s priorities. Much like politics, they are foundational to deciding what the quality of daily life will be like for residents, and this is no different in New York City. The budget for NYC is supposed to account for the needs of approximately 8 million citizens, and because of this, the budget is suitably large on a yearly basis—covering roughly 150 agencies and over 300 departments, the budget is an amalgam of seven different components that do not necessarily all add up to one cohesive whole. Rather, those different components describe different parts of the budget, sometimes overlapping and sometimes extending beyond the range of the current fiscal year.
Part of NYC’s unique budget is also the existence of participatory budgeting, which is positioned as a way for citizens to get more directly involved in the budget process. According to Ebdon et al, “there is some evidence that the governmental environment is related to the involvement of citizens in the budgeting process,” so it might seem to be the case that participatory budgeting is a good thing overall. In actuality, this shows itself to be little more than a sandbox provided by legislators—according to an article published in the journal Administration & Society, the participatory budgeting process in NYC “earmarks” or sets aside a certain amount from the budget in order to generate goodwill between council members and their constituents, leading to funding more projects at lower average amounts than in districts without participatory budgeting .
All of this information was synthesized into the project, which walks the audience through these points in a setting that attempts to make this seemingly opaque and immense topic a relaxed and approachable experience.

## The Project

Slices of the Big Apple is an interactive narrative that uses data visualization and animation in conjunction with data storytelling to: 1) holistically explain the New York City budget system to an average resident of the city; and 2) attempt to find an effective way to visualize the enormity of budgets in that sphere to the benefit of those involved in the actual process.
I am deeply interested in making inscrutable topics accessible to the average person, particularly if those topics relate to political science, which was one of my previous academic areas of focus. The intersection of political science and data visualization tends to be where it can be game-changing to very clearly explain information that has a direct impact on a person’s daily life, and public fund allocation in particular is something that can feel very opaque to the average person, but has an immediate and enormous impact on their daily lives. When conceptualizing the project, I wanted to see if I could push the boundaries of what other scholars had accomplished in attempting to visualize budgets, like Leuschner’s approach to visualizing Berlin’s budget data over time , which utilized several of the same chart types that I employed throughout the narrative, but using modern best practices and animation.
This project is primarily the answer to a question I asked myself when trying to understand the budget myself: “What if the city budget’s parts could be illustrated as interactive data stories instead of simple bar charts or static articles?”

## Development Process

The main goals of this project were to facilitate a holistic, clear understanding of the NYC budget, raise awareness of the potential of citizen participation in allocations that affect them, and to find an effective way to visualize budgets using data storytelling. In light of these goals, my process for development was fourfold: 1) gather research; 2) conduct analysis/data cleaning and processing; 3) design a clear and effective user experience; 4) bring that design into a web experience that accomplishes the goals I set out to achieve.
This project’s research phase was intensive, since budget data requires an immense amount of context that is not readily given by the Comptroller’s office. As one of the project’s main goals was to clarify budget practices for New Yorkers with little-to-no knowledge of budget practices (especially those unwilling to read across several site pages), the first thing I wanted to understand was where the budget’s boundaries were. This information, covered in both the background of this paper as well as the site’s narrative, directly contributed to the animated visualization of the “core” of the budget (Figure 1). Using resources from the Office of Management and Budget and the Independent Budget Office , both of which are directly connected to the city, I constructed both the narrative and the explanatory visualizations. The second thing I wanted to clarify was the difference between Adopted and Modified funds, which were explained on the Comptroller’s data site, but not in a way that a layperson could understand. This was vital to the creation of several of the 5-year community board budget analysis visualizations, as there were different use cases for either. When doing a historical look-back at budget data, the Adopted vs. Modified becomes a matter of expectation vs. reality, which was something that couldn’t be communicated in the Comptroller’s codebook. With more research, I learned how the Office of Management and Budget is involved in the budget process , as well as gaining an understanding of the budget’s balancing requirement, which ended up contributing greatly to the narrative.
The data cleaning and processing phase took place across a number of tools, namely Python in a Jupyter notebook, Tableau, QGIS, and Excel. Most of the data was processed in the Jupyter notebook using pandas and numPy, but Excel was utilized for a subset of the datasets, including using VLOOKUP to match the geoJSON community district numbers with their respective community board for use in a choropleth, Tableau was utilized for testing data shapes, and QGIS was solely used to reproject the geoJSON obtained from the NYC Department of City Planning’s data portal, Bytes of the Big Apple. The budget data was obtained from the Comptroller’s data portal, Checkbook NYC, as five separate datasets that were concatenated in the Jupyter notebook and then processed into five of the ten final datasets.
The following dataset explanations are all a result of data processing done in that Jupyter notebook, resulting from the budget data. Adoptedtotal.csv was a result of grouping the data by the feature “Year” and using the built-in sum function to sum by the feature “Adopted.” Topten-mod-total.csv also used the base budget dataset, grouping the data by “Year” and “Agency” and then performing a sum on the “Modified” feature. This was then pivoted, sorted by the highest values per year, and sliced down to the top ten. This was later reduced to only five entities in the editing process. Commboards.csv is the most comprehensive Community Board-centered dataset and the basis for many of the visualizations in the second half of the explainer, created by doing a string search for the term “Community Board” in the “Agency” feature. From that subset, commsmod.csv was created using a for loop to search through every row in the “Agency” feature for a borough match, creating a new feature in the dataset titled “Borough.” The resulting dataset was also used to create commboard-totals.csv, which takes the new feature, groups the data by both “Year” and “Borough,” and sums the feature “Modified.” After conducting this groupby, the data was pivoted, using the years as columns and the boroughs as rows, with the Modified numbers as the values of the dataset.
One of the datasets was partially constructed in Excel, but modified using Python—the dataset in question, tenmil-withpercent.csv, was retrieved from the Independent Budget Office’s brochure-based explanation of the budget, in order to reimagine it as a visual component. The data was reconstructed as “parts of a whole,” and additional research was conducted for some of the units in order to obtain their totals. The percentage column was created in the Jupyter notebook, but the visualizations required distillation of the numbers into their unit price and total price in order to visualize the total amount required for those categories. Finally, all of the calendar datasets (dates21.csv, datespartial-half1.csv, and datespartial-half2.csv) were created in Excel using autofill for simplicity and to avoid using JavaScript for the calculations.
For a five-year analysis, I had to focus on one topic so that the analysis itself wouldn’t be overwhelming—when I examined the data, I noticed that community boards were given an allocation, and from prior experience attending a community board meeting, I was very interested in diving deeper into those fund allocations. Community boards themselves function as yet another level of government between residents and city government, and play a vital role in the budget process. As I conducted preliminary descriptive analysis, I began to wonder if, on the whole, there were any patterns in which boards got more funding, which led to two questions: 1) “Is there a relationship between a board’s location and how much it gets in funding?”; and 2) “Is there a relationship between a board office getting more funds and the difference between their adopted vs. modified budget for the fiscal year?” In order to answer these questions, I conducted a series of tests, including an ANOVA test and a Pearson’s correlation matrix.
The ANOVA test turned out to be more useful than the correlation matrix, and I put the second question to the side in order to keep the scope of the project from becoming too large. Setting aside boroughs that did not have an adequate sample size from which to draw, I conducted the test on Brooklyn, Manhattan, and Queens community boards, which had normal distributions and a good sample size to draw from. The f-statistic was ~74.73, and the p-value was far beneath the standard alpha threshold of 0.01, so the statistics indicated that, in this case, the null hypothesis should be rejected and that the answer to the first question was that there is a relationship between location and funding. I decided not to display the results of the test in the narrative mainly to keep it accessible for an everyday audience, who might not be engaged by the results. This process did, however, influence the spontaneous creation of a jitterplot (Figure 2) inspired by one of the preliminary descriptive analysis visualizations, which made the results of this test very clear.
Turning to narrative and design, I conducted both processes in concert. The idea behind this was to make the narrative and visualization design as seamless as possible. From a design perspective, one of my main goals was to make the site beautiful and engaging with the intent to ease understanding. Large paragraphs can be difficult to parse, so something I wanted to do very early on was highlight important key terms and phrases that would draw the audience’s attention and help them synthesize the information to the point of understanding. I centered the design theme around the city’s nickname, “The Big Apple,” and used gala apples as the centerpiece for the site’s color palette. After selecting the colors, I tested them using Susie Lu and Elijah Meeks’ VizPalette for accessibility and clarity in all forms of visualization (dots, lines, bars, etc). In terms of typography, I wanted web fonts that were fun, but also reduced fatigue as much as possible, allowing for ease of readability on all levels. The decision to use Capriola for headings and Asap for the body text was to remove distraction as much as possible—Capriola has so much character that I was worried it would steal the show from the visuals, so Asap, which is also a sans serif font that has much in common with Capriola without having as much showmanship, felt like a natural choice (Figure 3). The roundness of the typefaces was also very intentional, drawing attention back to the theme of the “Big Apple.”
That design theme is similarly invoked throughout the narrative, using an apple as an overarching metaphor for the budget. With that theme in mind, I did multiple iterations of storyboarding for each part, highlighting key points of the high-level overview section of the narrative, and then constructing a whittled-down version of my initial concept for the five-year analysis. In this section, I was surprised to find that the COVID-19 pandemic had had a noticeable impact on the budget, and made a note of that in the narrative—a potential explanation for the decrease in overall funding may lie in the fact that there was a massive amount of flight from the city during the early days of the pandemic, which is interesting when considering that the budget is required to be balanced within $5 million. According to Jordan, there is a prevailing theory that citizens can express their discontent with government policy when they “exit the market by moving out of the jurisdiction.” In this case, the reduced overall revenue from the lack of ability to tax those residents who had fled the city would naturally lead to a reduction in expenditure allocation. Moreover, according to Gordon et al, “most states and localities started 2020 in very favorable fiscal condition,” and NYC’s 2020 Fiscal Year adopted allocation reflected that as well. This created a great moment in the narrative where I was able to create a small insight before drilling down into the next level of the analysis. From that insight, shifting the focus in the narrative onto the community boards gave me the opportunity to explore the concept from a geographic level while also creating a great interactive moment in the narrative by asking the audience to identify themselves within the position of the narrative, giving it stakes.
For the visualizations, I created basic designs that were iterated on multiple times, based on both the data and the narrative. Previous attempts by scholars to visualize other government budgets tended to have success with treemaps , so I knew that using a treemap (Figure 4) to show parts of a whole was going to come into play, which manifested while I was storyboarding the second part of the narrative, and I already had the idea to create a map (Figure 5) using the skills I learned in a previous map-focused course, so from there, it was a matter of asking what the best representation was for the other points in the process. I decided on a horizontal bar chart (Figure 6) for the initial step in part two, in order to start from a high-level overview, then zoom down into the community boards by using a heatmap table (Figures 7A, 7B) as an intermediary step. I completed conceptualization for the visualizations in reverse, since the second part of the narrative was more data-driven than the first, and I wanted to make sure everything made sense before stepping back and creating the visuals for the explanations.
Many of the visualizations for the first part were not driven by large amounts of data, but were visual representations of concepts, save for the section showing how big $10 million is in the scope of the entire Adopted budget for one year. That section in particular was one of the most difficult for me to both conceptualize and code, as I was reimagining a previously-conducted concept from the Independent Budget Office that was in line with the second goal of this project—attempting to see if there was a way to show this concept in an even more comprehensible way. In the end, I decided to use animation to represent this concept in a way that a static representation wouldn’t accomplish (Figures 8A, 8B).
When I entered the code phase, my process became even more integrated—with the structure of my narrative and visualizations down, I was constantly iterating on both as I coded, adding or removing parts as necessary. I contemplated using a framework like Vue.js to set the project up, but felt that it would add a level of complication that would not be helpful to the process. Instead, I opted for a very basic setup of one HTML file, one CSS file, and one JavaScript file, which would work in tandem to create the site. In addition, debugging would be less complicated. My coding process generally began with pen and paper, re-sketching the intended visual and then pseudocoding the logic necessary in order to bring the visual to life. For some of the visuals, I used an Observable HQ notebook to test out code in an asynchronous environment. I had used scrollama once before, in a project for a previous class, but I had used it with Vue.js and wasn’t sure how I would structure it in this project. In the end, I set it up in the initialization function, which executes once all of the data is loaded in.
Throughout the coding phase, I was constantly learning and becoming familiar with scrollama, altering the logic of the code on an as-needed basis. One of the principles I tried to implement was the idea of keeping the code DRY (don’t repeat yourself) and using functions where possible in order to both keep the code organized and efficient. This meant that, several times through the process, I would notice a block of code that could be made DRY and edited when necessary.

## Connections to Focus Area and Coursework

Throughout the project, which is primarily visualization-based, I was constantly leveraging prior experiences from previous courses. The skills and languages I learned in my Data Mining class with Professor Ashwin Satyanarayana and Working With Data class with Professor Timothy Shortell (Python in particular, using numPy and pandas) were crucial to parsing and analyzing the 800,000 total rows that resulted from combining five years of budget data, especially when it came to using Python to filter, pivot, and transform the data I needed and calculating the year-over-year percentage changes for the community boards. Additionally, the skills I learned in my Data Analysis Methods class with Professor Howard Everson were crucial to answering the pivotal question in part two of the narrative—without that foundation in statistical analysis, I would not have been able to confirm that there was a relationship between the location of a community board and its increased funding.
My course work was also based in best practices for data visualization, particularly considering how people understand information, points of data feminism (including data ethics), and accessibility standards, all gathered through my Fundamentals of Data Visualization class taught by Professor Michelle McSweeney and Data, Culture, and Society class taught by Professor Katherine Behar. Both classes approached data and visualization with care, and I attempted to use those same principles in assembling the narrative of the project. Part of my course work also entailed taking electives like my course on Geographic Information Systems taught by Professor Shipeng Sun, which was instrumental to representing the community boards as a choropleth over a period of time, and a digital humanities course taught by Professor Bret Maney, which influenced my design and narrative-constructing sensibilities to effectively deliver the humanistic narrative experience that I landed on with this project.
The visualization studio courses I took with Professor Aucher Serr on creating web visualizations were the most vital to the project’s success—many of the examples we investigated in both the Interactive Data Visualization and Advanced Interactive Data Visualization studio classes structurally inspired and laid the groundwork for this project. These classes taught me most of what I know about front-end development of visualizations, particularly in constructing my data visualization process and introducing me to resources like the visualization-building package d3.js and the package scrollama.js. These classes also showed me the relevance and power of web-based visualization in terms of making information accessible to a wider audience, especially now, when web-based journalism is using these technologies and techniques. Throughout the project, I was constantly going back to concepts taught in these classes, and they were fundamental to the core of the project.

## Evaluation

This project was an enormous undertaking, and there were plenty of challenges along the way. In terms of the initial vision of the project, I accomplished the primary goals of what I set out to do, but reduced some of the more ambitious elements in the pursuit of those goals. Some of the challenges were in the data side of things, but most were in the coding process, which was dependent on other packages.
In my initial plan for this project, I cast a somewhat wide net in terms of the audience and the five-year analysis section. Though fundamentally, the goal was to analyze the budget data over five years, I soon found that there were so many agencies that attempting to visualize all 150+ agencies would get overwhelming for any audience looking for a clear explanation of the budget. My advisor, Professor Serr, was extremely helpful in guiding me towards a thought process that would create a more manageable scope, and in the end, what resulted was better for the project than what I originally had in mind.
Additionally, at the start, I identified three audiences for the project: NYC residents, NYC officials who are interested in alternative methods of budget visualization, and activists based in the city who need a way to reference and advocate for changes in budget spending. While the first two audiences remained central to the project, the third audience would have needed more of an exploratory tool that would allow them to find what they need. Due to my need to reduce the scope of the project in the interest of time and ease of understanding, I removed this particular intended audience from the scope of the completed project.
In every other matter, though, the project mostly aligns with the initial vision—I successfully centralized a narrative that facilitates a holistic understanding of the NYC budget and conducts a five-year analysis. Though that analysis is not necessarily of the consequences of budget cuts, which would have taken me far beyond the scope of the initial project, it does conduct a five-year analysis of an important part of New Yorkers’ daily lives, raising awareness of this tool that residents have that can improve their quality of life.
Regarding challenges and setbacks, the data was initially troublesome due to the conflicting ways that the Comptroller’s data codebook and the Independent Budget Office’s explainers each defined “adopted” versus “modified.” This was a major part of the project, because getting the intent of these numbers correct was crucial. Through the data analysis process and cross-referencing numbers between the IBO and the Comptroller’s office, I was able to understand the difference and implement a clear explanation in the project so that future developers could more easily understand the codebook.
In the sphere of coding, there were several minor challenges that simply involved pseudocoding in an iterative manner until I understood what the obstacle was. However, one major challenge faced during the late development stages was the update of the scrollama content delivery network from version 2.2.3 to version 3.0, which completely broke my scrollytelling capabilities. This setback gave me the opportunity to rethink the way I had set up my repository, leading me to figure out that GitHub pages requires an empty “.nojekyll” file in the root repository in order to access the node_modules subfolder when using npm to manage packages. From there, I streamlined my other code packages and ended up with a far more manageable setup that won’t break (as CDNs are vulnerable in precisely the way described here).
This project succeeded in providing an engaging and high-level overview of the NYC budget, in addition to raising awareness about Community Board existence and office funding—these functions have a deep impact on residents’ daily lives, but because of the lack of visibility, residents don’t usually even know that the boards exist, let alone that they exist to improve quality of life. Where this project failed is in terms of a wholly WCAG-compliant accessible and mobile web experience, which I plan to rectify in the near future—as one person attempting to take this project on, I was limited in terms of having enough time to make sure that the visualizations worked and were wholly accessible at the same time. Though I did my best to keep content hierarchical and links underlined, I will revisit the project in the future to make sure that as many people can access it as possible. Despite this, my initial goals were accomplished, making this project an overall success.

## Continuation of the Project

As mentioned, due to time constraints, I wasn’t able to optimize the site for mobile or ensure that members of my audiences using screen readers can access the visualizations, but I plan to do so in the future, as I want the project to be as accessible to as many members of my intended audiences as possible. I also plan to make the site completely WCAG-compliant in terms of accessibility, adding descriptions to the SVGs/divs and textures to visualizations that only use color to encode values. Currently, the site is partially accessible by being structured hierarchically, having underlined links and large and legible fonts, using lists where items are listed, and using the word “interact” instead of “click” to be more inclusive for keyboard and mobile users. However, more can still be done, especially in terms of the visualization.
In the text of the site, I also outline another future endeavor: “This project will eventually have another sandbox component that allows you to fully dig into [each Community Board’s spending allocations].” In the process of analyzing data, I obtained some very interesting results regarding the dollar difference between each Community Board’s adopted vs modified funding that would be a large project in its own right, and due to scoping, I set that and other large sandbox-type exploratory visualizations aside; however, I intend to create a second part to this narrative that will function as a separate sandbox in the future that will bring my intended third audience—activists—back into the picture.
Additionally, on the coding side, I intend to refactor the main JavaScript file into a module and components—my development process required that I work in a single file in order to have the most comprehensive view of the code, especially with the use of scrollama, but I would like the project to be able to be parsed by other developers and be of more use to others attempting to visualize budget data in the future.
Overall, I truly think this project could be a useful tool for those seeking to understand the NYC budget and get involved in their communities, and I intend to make it as complete as possible so that it can make a meaningful change in the way we live as New Yorkers.
